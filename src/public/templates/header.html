<!-- Barra superior preta fixa -->
<nav class="navbar navbar-dark bg-dark fixed-top">
    <div class="container-fluid">
        <a class="navbar-brand" href="/index.html">Revenda de Carros</a>
        <div class="ms-auto d-flex align-items-center">
            <span class="text-light me-3" id="userInfo">Administrador (1) - Último acesso: 26/03/2025, 17:43:55</span>
            <div class="dropdown">
                <button class="btn btn-outline-light dropdown-toggle" type="button" id="userMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                    Conta
                </button>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userMenuButton">
                    <li><a class="dropdown-item" href="/meus-dados.html">MEUS DADOS</a></li>
                    <li><a class="dropdown-item" href="/alterar-senha.html">ALTERAR SENHA</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><button class="dropdown-item" id="logoutButton">SAIR</button></li>
                </ul>
            </div>
        </div>
    </div>
</nav>

<!-- Espaçador para compensar a barra fixa -->
<div style="height: 56px;"></div>

<!-- Menu azul centralizado -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
        <button class="navbar-toggler mx-auto" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavBlue">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-center" id="navbarNavBlue">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link text-white" href="/admin/users.html">USUÁRIOS</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white" href="/index.html">CONFIGURADOR</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white" href="/isencoes.html">ISENÇÕES</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white" href="/cotacoes.html">COTAÇÕES</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white" href="/clientes.html">CLIENTES</a>
                </li>
                <li class="nav-item dropdown" id="veiculosMenuContainer">
                    <a class="nav-link text-white dropdown-toggle" href="#" id="veiculosDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        VEÍCULOS
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="veiculosDropdown">
                        <li><a class="dropdown-item" href="/veiculos/marca.html">MARCA</a></li>
                        <li><a class="dropdown-item" href="/veiculos/modelo.html">MODELO</a></li>
                        <li><a class="dropdown-item" href="/veiculos/veiculo.html">VEÍCULO</a></li>
                        <li><a class="dropdown-item" href="/veiculos/opcional.html">OPCIONAIS</a></li>
                        <li><a class="dropdown-item" href="/pinturas.html">PINTURAS</a></li>
                        <li><a class="dropdown-item" href="/veiculos/venda-direta.html">VENDA DIRETA</a></li>
                    </ul>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white" href="/index.html">CONFIGURADOR</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- Script para garantir que o botão de logout funcione -->
<script>
    // Configurar o botão de logout diretamente no template
    document.addEventListener('DOMContentLoaded', function() {
        const logoutButton = document.getElementById('logoutButton');
        if (logoutButton) {
            logoutButton.addEventListener('click', function() {
                console.log('Header Template: Botão de logout clicado');
                
                // Criar overlay para animação de logout
                const overlay = document.createElement('div');
                overlay.style.position = 'fixed';
                overlay.style.top = '0';
                overlay.style.left = '0';
                overlay.style.width = '100%';
                overlay.style.height = '100%';
                overlay.style.backgroundColor = 'rgba(0, 0, 0, 0.8)';
                overlay.style.color = 'white';
                overlay.style.display = 'flex';
                overlay.style.flexDirection = 'column';
                overlay.style.justifyContent = 'center';
                overlay.style.alignItems = 'center';
                overlay.style.zIndex = '9999';
                overlay.style.fontFamily = 'monospace';
                overlay.style.fontSize = '16px';
                overlay.style.transition = 'opacity 0.5s';
                overlay.style.opacity = '0';
                
                document.body.appendChild(overlay);
                
                // Forçar reflow para que a transição funcione
                overlay.offsetHeight;
                overlay.style.opacity = '1';
                
                // Função para adicionar uma linha de texto à animação
                const addLine = (text) => {
                    const line = document.createElement('div');
                    line.textContent = text;
                    line.style.margin = '5px';
                    overlay.appendChild(line);
                };
                
                // Iniciar animação
                setTimeout(() => {
                    addLine('Iniciando processo de logout...');
                    
                    setTimeout(() => {
                        addLine('Removendo token de autenticação...');
                        
                        setTimeout(() => {
                            addLine('Removendo dados do usuário...');
                            
                            setTimeout(() => {
                                addLine('Limpando localStorage...');
                                
                                setTimeout(() => {
                                    addLine('Logout concluído! Redirecionando...');
                                    
                                    // Limpar autenticação e redirecionar
                                    setTimeout(() => {
                                        // Remover dados de autenticação
                                        localStorage.removeItem('token');
                                        localStorage.removeItem('user');
                                        
                                        // Redirecionar para a página de logoff
                                        window.location.href = '/logoff.html';
                                    }, 1000);
                                }, 500);
                            }, 500);
                        }, 500);
                    }, 500);
                }, 500);
            });
        }
    });
</script>
